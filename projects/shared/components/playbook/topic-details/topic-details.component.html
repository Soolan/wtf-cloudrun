<div class="topic">
  <div class="heading">
    <div class="left">
      @if ((topic.creator.avatar | storageUrl | async); as avatarUrl) {
        <div class="avatar" [ngStyle]="{'background-image':'url(' + avatarUrl + ')'}">
        </div>
      } @else {
        <div class="avatar"></div>
      }
    </div>
    <div class="right">
      <div class="mat-headline-6 thin">{{ topic.title }}</div>
      <p class="caption">
        <b>Author: </b>{{ topic.creator.name }}
      </p>
      <div class="caption status">
        <span><b>Update: </b>{{ topic.timestamps.updated_at | date: 'short' }}</span>
        <div class="legends">
          <button mat-icon-button matTooltip="Discussions" (click)="openDiscussions()">
            <mat-icon>sms</mat-icon>
          </button>
          @if ((topic.fullText?.length ?? 0) > 250) {
            <button mat-icon-button matTooltip="BPMN diagram" (click)="bpmn()">
              <mat-icon>account_tree</mat-icon>
            </button>
          }
          <button mat-icon-button matTooltip="Knowledge base" (click)="kb()">
            <mat-icon>auto_awesome</mat-icon>
          </button>
        </div>
      </div>
    </div>
  </div>
  <div class="mat-subtitle-2">{{ topic.subtitle }}</div>
  @if (topic.fullText) {
    <div class="mat-body-1" style="font-size: 0.9em">{{ topic.fullText }}</div>
  }
</div>
