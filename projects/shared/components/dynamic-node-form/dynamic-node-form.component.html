@if (form && parametersSchema) {
  <form [formGroup]="form" class="dynamic-form">
    @for (field of parametersSchema.fields; track field.name) {
      <div class="form-field-container">
        @if (field.description) {
          <mat-hint class="field-description mat-caption">{{ field.description }}</mat-hint>
        }
        @switch (field.type) {
          @case ('string') {
            <mat-form-field appearance="outline">
              <mat-label>{{ field.label }}</mat-label>
              <input matInput [placeholder]="field.placeholder || 'field.name'" [formControlName]="field.name">
            </mat-form-field>
          }
          @case ('textarea') {
            <mat-form-field appearance="outline">
              <mat-label>{{ field.label }}</mat-label>
              <textarea matInput [placeholder]="field.placeholder || 'field.name'" [formControlName]="field.name" cdkTextareaAutosize cdkAutosizeMinRows="3"></textarea>
            </mat-form-field>
          }
          @case ('boolean') {
            <mat-slide-toggle [formControlName]="field.name">{{ field.label }}</mat-slide-toggle>
          }
          @case ('field-list') {
            <lib-form-field-list [formControlName]="field.name"></lib-form-field-list>
          }
          @case ('select') {
            <mat-form-field class="half">
              <mat-label>{{ field.label }}</mat-label>
              <mat-select [formControlName]="field.name">
                @for (option of field.options; track option.value) {
                  <mat-option [value]="option.value">{{ option.label }}</mat-option>
                }
              </mat-select>
            </mat-form-field>

          }
          @case ('form-urls') {
            <lib-form-urls [nodeId]="nodeId"></lib-form-urls>
          }
          @default {
            <div class="placeholder-field">
              <p>Unknown field type: '{{field.type}}'</p>
            </div>
          }
        }
      </div>
    }
  </form>
}
